<!-- Hero -->
<div class="hero">
  <div class="logo">make life <span class="accent">simpler</span></div>
  <p class="tagline">Curated tools, products, and discoveries that actually save you time. No fluff, no filler ‚Äî just things that work.</p>
  <div class="search-bar">
    <span class="icon">üîç</span>
    <input type="text" id="searchInput" placeholder="Search {{TOTAL_ARTICLES}}+ curated recommendations...">
  </div>
</div>

<!-- Stats -->
<div class="stats">
  <div class="stat">
    <div class="num">{{TOTAL_ARTICLES}}</div>
    <div class="label">Curated Picks</div>
  </div>
  <div class="stat">
    <div class="num">{{TOTAL_TAGS}}</div>
    <div class="label">Categories</div>
  </div>
  <div class="stat">
    <div class="num">{{TOTAL_CLICKS}}</div>
    <div class="label">People Helped</div>
  </div>
  <div class="stat">
    <div class="num">New</div>
    <div class="label">Updated Weekly</div>
  </div>
</div>

<!-- Tabs -->
<div class="tabs" id="tabs">
  {{TABS}}
</div>
<div class="tabs-placeholder" id="tabsPlaceholder"></div>

<div class="content">
  <!-- Featured -->
  {{FEATURED}}

  <!-- Sections -->
  {{SECTIONS}}
</div>

<script>
(function() {
  // Search
  const input = document.getElementById('searchInput');
  const cards = document.querySelectorAll('.item-card');
  input.addEventListener('input', function() {
    const q = this.value.toLowerCase();
    cards.forEach(card => {
      const text = card.dataset.search || '';
      card.style.display = text.includes(q) ? '' : 'none';
    });
    // Hide empty sections
    document.querySelectorAll('.section-block').forEach(section => {
      const visible = section.querySelectorAll('.item-card:not([style*="display: none"])');
      section.style.display = visible.length ? '' : 'none';
    });
  });

  // Tabs (multi-select)
  const tabs = document.querySelectorAll('.tab');
  const sections = document.querySelectorAll('.section-block');
  const trendingTab = tabs[0];
  const activeTags = new Set();

  function applyFilters() {
    cards.forEach(card => {
      if (activeTags.size === 0) {
        card.style.display = '';
      } else {
        const cardTags = (card.dataset.tags || '').split(',');
        const match = [...activeTags].some(t => cardTags.includes(t));
        card.style.display = match ? '' : 'none';
      }
    });
    sections.forEach(section => {
      const visible = section.querySelectorAll('.item-card:not([style*="display: none"])');
      section.style.display = visible.length ? '' : 'none';
    });
  }

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const tag = this.dataset.tag;

      // Clicking Trending clears all filters
      if (!tag) {
        activeTags.clear();
        tabs.forEach(t => t.classList.remove('active'));
        trendingTab.classList.add('active');
        applyFilters();
        return;
      }

      // Toggle this tag
      if (activeTags.has(tag)) {
        activeTags.delete(tag);
        this.classList.remove('active');
      } else {
        activeTags.add(tag);
        this.classList.add('active');
        trendingTab.classList.remove('active');
      }

      // If nothing selected, revert to Trending
      if (activeTags.size === 0) {
        trendingTab.classList.add('active');
      }

      applyFilters();
    });
  });

  // Sticky tabs on scroll
  const tabsEl = document.getElementById('tabs');
  const placeholder = document.getElementById('tabsPlaceholder');
  let tabsTop = tabsEl.offsetTop;

  function updateSticky() {
    tabsTop = placeholder.classList.contains('active') ? placeholder.offsetTop : tabsEl.offsetTop;
    if (window.scrollY >= tabsTop) {
      if (!tabsEl.classList.contains('sticky')) {
        placeholder.style.height = tabsEl.offsetHeight + 'px';
        placeholder.classList.add('active');
        tabsEl.classList.add('sticky');
      }
    } else {
      tabsEl.classList.remove('sticky');
      placeholder.classList.remove('active');
    }
  }
  window.addEventListener('scroll', updateSticky, { passive: true });
  window.addEventListener('resize', function() { tabsTop = tabsEl.offsetTop; }, { passive: true });
})();
</script>
